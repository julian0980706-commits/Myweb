<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾Œå°æ§åˆ¶ | ç­ç´šè¨‚é¤</title>
    
    <style>
        /* åŸºç¤é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1e293b;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* é ‚éƒ¨æ¨™é¡Œ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }
        
        .title {
            font-size: 2rem;
            font-weight: 800;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }
        
        /* ä¸»å…§å®¹å€ */
        .main-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* è¿”å›é¦–é æŒ‰éˆ• */
        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-weight: 500;
            z-index: 100;
            transition: all 0.3s;
        }
        
        .home-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* åŠŸèƒ½å¡ç‰‡ */
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .card-title i {
            color: #667eea;
        }
        
        /* è¡¨å–®é–‹é—œå€ */
        .forms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        
        @media (max-width: 600px) {
            .forms-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
        
        .form-item {
            background: #f8fafc;
            border-radius: 15px;
            padding: 20px 15px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
            text-align: center;
            cursor: pointer;
        }
        
        .form-item:hover {
            border-color: #94a3b8;
            background: #f1f5f9;
        }
        
        .form-item.active {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .form-item.closed {
            border-color: #fca5a5;
            background: #fef2f2;
        }
        
        .form-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }
        
        .form-status {
            font-size: 0.9rem;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .status-open {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-closed {
            background: #fee2e2;
            color: #991b1b;
        }
        
        /* æŒ‡å—ç·¨è¼¯å™¨ */
        .guide-editor {
            width: 100%;
            min-height: 250px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            font-family: 'Noto Sans TC', sans-serif;
            font-size: 1rem;
            line-height: 1.6;
            background: #f8fafc;
            color: #1e293b;
            resize: vertical;
            transition: all 0.3s;
        }
        
        .guide-editor:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* æŒ‰éˆ•å€ */
        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }
        
        .btn {
            padding: 16px 20px;
            border: none;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
        }
        
        /* æ“ä½œæŒ‰éˆ•ç¾¤çµ„ */
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-btn {
            flex: 1;
            min-width: 140px;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* ç‹€æ…‹è¨Šæ¯ */
        .message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            font-weight: 500;
            opacity: 0;
            transition: all 0.5s;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .message.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        
        /* æ‰‹æ©Ÿåº•éƒ¨æ“ä½œæ¬„ */
        .mobile-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px 20px;
            border-top: 1px solid #e2e8f0;
            display: none;
            justify-content: center;
            gap: 15px;
            z-index: 100;
        }
        
        .mobile-bar-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            max-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        @media (max-width: 768px) {
            .mobile-bar {
                display: flex;
            }
            
            .main-content {
                padding-bottom: 100px;
            }
        }
        
        /* æœ€å¾Œæ›´æ–°æ™‚é–“ */
        .update-time {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- è¿”å›é¦–é æŒ‰éˆ• -->
    <a href="index.html" class="home-btn">
        <i class="fas fa-arrow-left"></i>
        è¿”å›é¦–é 
    </a>
    
    <!-- é ‚éƒ¨æ¨™é¡Œ -->
    <div class="header">
        <h1 class="title">ğŸ“± è¨‚é¤ç³»çµ±å¾Œå°</h1>
        <p class="subtitle">ç›´æ¥æ§åˆ¶æ‰€æœ‰è¡¨å–®é–‹é—œ Â· æ‰‹æ©Ÿé›»è…¦éƒ½èƒ½ç”¨</p>
    </div>
    
    <!-- ä¸»å…§å®¹å€ -->
    <div class="main-content">
        <!-- å¡ç‰‡1ï¼šè¡¨å–®é–‹é—œæ§åˆ¶ -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-toggle-on"></i>
                è¡¨å–®é–‹é—œæ§åˆ¶
            </h2>
            
            <div class="forms-grid" id="formsGrid">
                <!-- form1~form15 ç”±JavaScriptç”Ÿæˆ -->
            </div>
            
            <div class="action-buttons">
                <button class="action-btn" style="background: #10b981; color: white;" id="openAllBtn">
                    <i class="fas fa-lock-open"></i>
                    é–‹å•Ÿå…¨éƒ¨è¡¨å–®
                </button>
                <button class="action-btn" style="background: #ef4444; color: white;" id="closeAllBtn">
                    <i class="fas fa-lock"></i>
                    é—œé–‰å…¨éƒ¨è¡¨å–®
                </button>
            </div>
        </div>
        
        <!-- å¡ç‰‡2ï¼šæŒ‡å—å…§å®¹ç·¨è¼¯ -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-edit"></i>
                æŒ‡å—å…§å®¹ç·¨è¼¯
            </h2>
            
            <textarea class="guide-editor" id="guideEditor" placeholder="åœ¨é€™è£¡è¼¸å…¥æŒ‡å—å…§å®¹...">
# ğŸ“– è¨‚é¤ç³»çµ±ä½¿ç”¨æŒ‡å—

## ğŸ½ï¸ å¦‚ä½•è¨‚é¤ï¼Ÿ
1. **é¸æ“‡æ—¥æœŸ**ï¼šæŸ¥çœ‹æ—¥æ›†æˆ–è¿‘æœŸè¨‚é¤
2. **é¸æ“‡é¤é»**ï¼šé»é¸æƒ³è¦çš„é¤é»é¸é …
3. **å¡«å¯«åº§è™Ÿ**ï¼šè¼¸å…¥ä½ çš„åº§è™Ÿï¼ˆä»–ç­è«‹åŠ è¨»ç­ç´šï¼‰
4. **æäº¤è¨‚å–®**ï¼šç¢ºèªè³‡è¨Šå¾Œæäº¤

## â° é‡è¦æ™‚é–“æé†’
- **æ¯æ—¥çµå–®æ™‚é–“**ï¼šè«‹åƒè€ƒå„è¡¨å–®é¡¯ç¤ºæ™‚é–“
- **é€±ä¸‰æ³¨æ„**ï¼šéƒ¨åˆ†é¤å»³å›ºå®šå…¬ä¼‘
- **ä¿®æ”¹è¨‚å–®**ï¼šå¦‚éœ€ä¿®æ”¹è«‹ç›´æ¥è¯çµ¡ç­ä»£

## â“ å¸¸è¦‹å•é¡Œ
**Qï¼šå¯ä»¥è¨‚è³¼å¤šä»½å—ï¼Ÿ**
Aï¼šç›®å‰ç³»çµ±ä¸€æ¬¡åªæ¥å—ä¸€ä»½è¨‚å–®ã€‚

**Qï¼šå¿˜è¨˜è¨‚é¤æ€éº¼è¾¦ï¼Ÿ**
Aï¼šè«‹ç›´æ¥è¯çµ¡é¤å»³æˆ–è©¢å•ç­ä»£ã€‚

**Qï¼šå¦‚ä½•çŸ¥é“è¨‚å–®æ˜¯å¦æˆåŠŸï¼Ÿ**
Aï¼šæäº¤å¾Œæœƒé¡¯ç¤ºè¨‚å–®ç·¨è™Ÿå³ç‚ºæˆåŠŸã€‚

## ğŸ“ è¯çµ¡æ–¹å¼
- **ç­ä»£**ï¼šç‹å°æ˜ (0912-345-678)
- **ç³»çµ±å•é¡Œ**ï¼šæåŒå­¸ (admin@example.com)
- **ç·Šæ€¥è¯çµ¡**ï¼šç›´æ¥æ’¥æ‰“é¤å»³é›»è©±
            </textarea>
            
            <div class="buttons-grid">
                <button class="btn btn-success" id="saveGuideBtn">
                    <i class="fas fa-save"></i>
                    å„²å­˜æŒ‡å—å…§å®¹
                </button>
                <button class="btn btn-secondary" id="resetGuideBtn">
                    <i class="fas fa-undo"></i>
                    æ¢å¾©é è¨­å…§å®¹
                </button>
            </div>
        </div>
        
        <!-- å¡ç‰‡3ï¼šå¿«é€Ÿæ“ä½œ -->
        <div class="card">
            <h2 class="card-title">
                <i class="fas fa-bolt"></i>
                å¿«é€Ÿæ“ä½œ
            </h2>
            
            <div class="buttons-grid">
                <button class="btn btn-primary" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i>
                    é‡æ–°æ•´ç†ç‹€æ…‹
                </button>
                <button class="btn btn-secondary" id="viewGuideBtn">
                    <i class="fas fa-eye"></i>
                    é è¦½æŒ‡å—é é¢
                </button>
                <button class="btn btn-secondary" id="viewCalendarBtn">
                    <i class="far fa-calendar-alt"></i>
                    æŸ¥çœ‹è¨‚é¤æ—¥æ›†
                </button>
            </div>
            
            <div style="margin-top: 25px; padding-top: 20px; border-top: 2px solid #f1f5f9;">
                <h3 style="font-size: 1.1rem; color: #475569; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-mobile-alt"></i>
                    æ‰‹æ©Ÿä½¿ç”¨æé†’
                </h3>
                <p style="color: #64748b; line-height: 1.6; font-size: 0.95rem;">
                    æ­¤å¾Œå°å·²é‡å°æ‰‹æ©Ÿå„ªåŒ–ï¼Œå¯ç›´æ¥ç”¨æ‰‹æ©Ÿç€è¦½å™¨æ“ä½œã€‚
                    <br>å»ºè­°å°‡æ­¤é é¢åŠ å…¥æ›¸ç±¤ï¼Œæ–¹ä¾¿éš¨æ™‚é–‹å•Ÿã€‚
                </p>
            </div>
        </div>
    </div>
    
    <!-- æ‰‹æ©Ÿåº•éƒ¨æ“ä½œæ¬„ -->
    <div class="mobile-bar">
        <button class="mobile-bar-btn" style="background: #10b981; color: white;" id="mobileOpenAll">
            <i class="fas fa-lock-open"></i>
            å…¨é–‹
        </button>
        <button class="mobile-bar-btn" style="background: #ef4444; color: white;" id="mobileCloseAll">
            <i class="fas fa-lock"></i>
            å…¨é—œ
        </button>
        <button class="mobile-bar-btn" style="background: #667eea; color: white;" id="mobileSave">
            <i class="fas fa-save"></i>
            å„²å­˜
        </button>
    </div>
    
    <!-- ç‹€æ…‹è¨Šæ¯ -->
    <div class="message" id="message">
        <i class="fas fa-check-circle"></i>
        <span>æ“ä½œæˆåŠŸï¼</span>
    </div>
    
    <!-- æœ€å¾Œæ›´æ–°æ™‚é–“ -->
    <div class="update-time">
        æœ€å¾Œæ›´æ–°ï¼š<span id="updateTime">--:--:--</span>
    </div>
    
    <!-- JavaScript -->
    <script>
        // ============================================
        // æ¨¡æ“¬è³‡æ–™ - form1~form15
        // ============================================
        //åœ¨æ­¤ä¿®æ”¹é¤å»³å(å¾Œå°çš„)
        // ============================================
// è‡ªå‹•è¼ªæ’ç³»çµ± - æœƒè‡ªå‹•é¿é–‹é€±ä¸‰ä¸é–‹çš„åº—
// ============================================

// é¤å»³æ¸…å–®ï¼ˆ15é–“é¤å»³ï¼Œå…¶ä¸­ä¸€é–“é€±ä¸‰ä¸é–‹ï¼‰
 // ===== å¾Œå°å¯†ç¢¼ä¿è­·ï¼ˆæ”¾åœ¨æ‰€æœ‰ä»£ç¢¼çš„æœ€å‰é¢ï¼‰=====
    (function checkAdminAccess() {
        const isAuthenticated = sessionStorage.getItem('admin_authenticated') === 'true';
        const ADMIN_PASSWORD = "3840"; // ğŸ” è«‹å‹™å¿…æ”¹æˆä½ è‡ªå·±çš„å¯†ç¢¼
        
        if (!isAuthenticated) {
            const password = prompt('ğŸ”’ è«‹è¼¸å…¥å¾Œå°ç®¡ç†å¯†ç¢¼ï¼š');
            if (password === ADMIN_PASSWORD) {
                sessionStorage.setItem('admin_authenticated', 'true');
                alert('é©—è­‰æˆåŠŸï¼');
            } else {
                alert('å¯†ç¢¼éŒ¯èª¤ï¼Œå°‡è¿”å›é¦–é ã€‚');
                window.location.href = 'index.html';
            }
        }
    })();
const RESTAURANTS = [
    { name: 'æµ·å—é›é£¯', closedDay: null },      // æ¯å¤©éƒ½é–‹
    { name: 'æ± ä¸Šä¾¿ç•¶', closedDay: null },      // æ¯å¤©éƒ½é–‹
    { name: 'è€ç‹ç‰›è‚‰éºµ', closedDay: null },     // æ¯å¤©éƒ½é–‹
    { name: 'è¼•é£Ÿæ²™æ‹‰åŠ', closedDay: null },     // æ¯å¤©éƒ½é–‹
    { name: 'ç¾å¼æ¼¢å ¡ç‹', closedDay: null },     // æ¯å¤©éƒ½é–‹
    { name: 'å—æ´‹å’–å“©å±‹', closedDay: null },     // æ¯å¤©éƒ½é–‹
    { name: 'æ—¥å¼ä¸¼é£¯', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'æ¸¯å¼ç‡’è‡˜', closedDay: 3 },         // é€±ä¸‰ä¸é–‹ï¼ˆ0=é€±æ—¥,1=é€±ä¸€,...,6=é€±å…­ï¼‰
    { name: 'ç¾©å¤§åˆ©éºµ', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'éŸ“å¼æ‹Œé£¯', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'ç´ é£Ÿé¤å»³', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'æ»·å‘³å°ˆè³£', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'ç‚’é£¯ç‚’éºµ', closedDay: null },       // æ¯å¤©éƒ½é–‹
    { name: 'å°ç«é‹', closedDay: null },         // æ¯å¤©éƒ½é–‹
    { name: 'æŠ«è–©åº—', closedDay: null }          // æ¯å¤©éƒ½é–‹
];

// è‡ªå‹•ç”¢ç”Ÿæœªä¾†15å¤©çš„è¡¨å–®å®‰æ’
function generateFormSchedule(startDate = new Date()) {
    const schedule = [];
    let currentDate = new Date(startDate);
    let restaurantIndex = 0;
    
    for (let i = 0; i < 15; i++) {
        const restaurant = RESTAURANTS[restaurantIndex % RESTAURANTS.length];
        const dayOfWeek = currentDate.getDay(); // 0=é€±æ—¥,1=é€±ä¸€,...,6=é€±å…­
        
        // æª¢æŸ¥æ˜¯å¦é‡åˆ°é€±ä¸‰ä¸é–‹çš„åº—
        if (restaurant.closedDay === dayOfWeek) {
            // èˆ‡éš”å¤©å°èª¿ï¼šè·³éä»Šå¤©ï¼Œæ˜å¤©å†æ’é€™å®¶åº—
            schedule.push({
                id: `form${i + 1}`,
                name: 'èª¿æ•´ä¸­',  // æš«æ™‚æ¨™è¨˜
                date: new Date(currentDate),
                restaurant: null,
                status: 'closed'
            });
            
            // æ—¥æœŸå‰é€²ä¸€å¤©ï¼Œä½†é¤å»³ç´¢å¼•ä¸è®Šï¼ˆæ˜å¤©å†æ’é€™å®¶ï¼‰
            currentDate.setDate(currentDate.getDate() + 1);
            i--; // é‡è¤‡é€™å€‹è¿´åœˆ
            continue;
        }
        
        // æ­£å¸¸å®‰æ’
        schedule.push({
            id: `form${i + 1}`,
            name: `${getWeekdayChinese(dayOfWeek)}${getMealType(i)}`, // å¦‚ï¼šé€±äºŒåˆé¤
            date: new Date(currentDate),
            restaurant: restaurant.name,
            status: 'open',
            closedDay: restaurant.closedDay
        });
        
        // å‰é€²åˆ°ä¸‹ä¸€å¤©å’Œä¸‹ä¸€å€‹é¤å»³
        currentDate.setDate(currentDate.getDate() + 1);
        restaurantIndex++;
    }
    
    // è™•ç†ã€Œèª¿æ•´ä¸­ã€çš„é …ç›®ï¼ˆèˆ‡éš”å¤©å°èª¿ï¼‰
    for (let i = 0; i < schedule.length; i++) {
        if (schedule[i].name === 'èª¿æ•´ä¸­' && i + 1 < schedule.length) {
            // èˆ‡éš”å¤©çš„é¤å»³å°èª¿
            const nextItem = schedule[i + 1];
            const tempRestaurant = nextItem.restaurant;
            
            schedule[i].name = nextItem.name;
            schedule[i].restaurant = tempRestaurant;
            schedule[i].status = 'open';
            
            // éš”å¤©çš„é …ç›®æ”¹æˆè¢«å°èª¿éä¾†çš„é¤å»³
            const dayOfWeek = schedule[i + 1].date.getDay();
            const mealType = getMealType(i + 1);
            schedule[i + 1].name = `${getWeekdayChinese(dayOfWeek)}${mealType}`;
            // restaurantä¿æŒåŸä¾†çš„é †åº
        }
    }
    
    return schedule;
}

// è¼”åŠ©å‡½æ•¸ï¼šå–å¾—ä¸­æ–‡æ˜ŸæœŸå¹¾
function getWeekdayChinese(day) {
    const weekdays = ['é€±æ—¥', 'é€±ä¸€', 'é€±äºŒ', 'é€±ä¸‰', 'é€±å››', 'é€±äº”', 'é€±å…­'];
    return weekdays[day];
}

// è¼”åŠ©å‡½æ•¸ï¼šå–å¾—é¤åˆ¥ï¼ˆåˆé¤/æ™šé¤ï¼‰
function getMealType(index) {
    return index % 2 === 0 ? 'åˆé¤' : 'æ™šé¤';
}

// æ›´æ–° FORM_LIST ç‚ºå‹•æ…‹ç”¢ç”Ÿ
const TODAY = new Date();
const FORM_LIST = generateFormSchedule(TODAY);
        
        // ============================================
        // åˆå§‹åŒ–
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ® æ¥µç°¡å¾Œå°è¼‰å…¥å®Œæˆ');
            
            // 1. è¼‰å…¥è¡¨å–®é–‹é—œ
            loadFormSwitches();
            
            // 2. è¼‰å…¥æŒ‡å—å…§å®¹
            loadGuideContent();
            
            // 3. è¨­å®šäº‹ä»¶ç›£è½å™¨
            setupEventListeners();
            
            // 4. æ›´æ–°æ™‚é–“é¡¯ç¤º
            updateTime();
            setInterval(updateTime, 1000);
            
            // 5. é¡¯ç¤ºæ­¡è¿è¨Šæ¯
            setTimeout(() => {
                showMessage('å¾Œå°è¼‰å…¥å®Œæˆï¼å¯ç›´æ¥æ§åˆ¶æ‰€æœ‰è¡¨å–®ã€‚');
            }, 1000);
        });
        
        // ============================================
        // ä¸»è¦åŠŸèƒ½å‡½æ•¸
        // ============================================
        
        // è¼‰å…¥è¡¨å–®é–‹é—œ
        function loadFormSwitches() {
            const container = document.getElementById('formsGrid');
            container.innerHTML = '';
            
            FORM_LIST.forEach(form => {
                const formItem = document.createElement('div');
                formItem.className = `form-item ${form.status}`;
                formItem.dataset.id = form.id;
                
                formItem.innerHTML = `
                    <div class="form-name">${form.name}</div>
                    <div class="form-status ${form.status === 'open' ? 'status-open' : 'status-closed'}">
                        ${form.status === 'open' ? 'é–‹æ”¾ä¸­' : 'å·²é—œé–‰'}
                    </div>
                `;
                
                // é»æ“Šåˆ‡æ›ç‹€æ…‹
                formItem.addEventListener('click', function() {
                    toggleFormStatus(form.id);
                });
                
                container.appendChild(formItem);
            });
        }
        
        // åˆ‡æ›è¡¨å–®ç‹€æ…‹
        function toggleFormStatus(formId) {
            const form = FORM_LIST.find(f => f.id === formId);
            if (form) {
                // åˆ‡æ›ç‹€æ…‹
                form.status = form.status === 'open' ? 'closed' : 'open';
                
                // æ›´æ–°é¡¯ç¤º
                const formItem = document.querySelector(`.form-item[data-id="${formId}"]`);
                formItem.className = `form-item ${form.status}`;
                
                const statusEl = formItem.querySelector('.form-status');
                statusEl.className = `form-status ${form.status === 'open' ? 'status-open' : 'status-closed'}`;
                statusEl.textContent = form.status === 'open' ? 'é–‹æ”¾ä¸­' : 'å·²é—œé–‰';
                
                // é¡¯ç¤ºè¨Šæ¯
                showMessage(`å·²${form.status === 'open' ? 'é–‹å•Ÿ' : 'é—œé–‰'} ${form.name}`);
                
                // é€™è£¡ä¹‹å¾Œæœƒé€£æ¥åˆ° Google Apps Script å¯¦éš›æ›´æ–°ç‹€æ…‹
                console.log(`åˆ‡æ›è¡¨å–®ç‹€æ…‹ï¼š${formId} -> ${form.status}`);
            }
        }
        
        // è¼‰å…¥æŒ‡å—å…§å®¹
        function loadGuideContent() {
            const savedContent = localStorage.getItem('guide_content');
            if (savedContent) {
                document.getElementById('guideEditor').value = savedContent;
            }
        }
        
        // è¨­å®šäº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            // é–‹å•Ÿå…¨éƒ¨è¡¨å–®
            document.getElementById('openAllBtn').addEventListener('click', function() {
                FORM_LIST.forEach(form => {
                    form.status = 'open';
                });
                loadFormSwitches();
                showMessage('âœ… å·²é–‹å•Ÿå…¨éƒ¨è¡¨å–®');
            });
            
            // é—œé–‰å…¨éƒ¨è¡¨å–®
            document.getElementById('closeAllBtn').addEventListener('click', function() {
                FORM_LIST.forEach(form => {
                    form.status = 'closed';
                });
                loadFormSwitches();
                showMessage('âœ… å·²é—œé–‰å…¨éƒ¨è¡¨å–®');
            });
            
            // å„²å­˜æŒ‡å—å…§å®¹
            document.getElementById('saveGuideBtn').addEventListener('click', function() {
                const content = document.getElementById('guideEditor').value;
                localStorage.setItem('guide_content', content);
                showMessage('âœ… æŒ‡å—å…§å®¹å·²å„²å­˜ï¼');
            });
            
            // æ¢å¾©é è¨­æŒ‡å—å…§å®¹
            document.getElementById('resetGuideBtn').addEventListener('click', function() {
                if (confirm('ç¢ºå®šè¦æ¢å¾©é è¨­æŒ‡å—å…§å®¹å—ï¼Ÿ')) {
                    const defaultContent = `# ğŸ“– è¨‚é¤ç³»çµ±ä½¿ç”¨æŒ‡å—

## ğŸ½ï¸ å¦‚ä½•è¨‚é¤ï¼Ÿ
1. **é¸æ“‡æ—¥æœŸ**ï¼šæŸ¥çœ‹æ—¥æ›†æˆ–è¿‘æœŸè¨‚é¤
2. **é¸æ“‡é¤é»**ï¼šé»é¸æƒ³è¦çš„é¤é»é¸é …
3. **å¡«å¯«åº§è™Ÿ**ï¼šè¼¸å…¥ä½ çš„åº§è™Ÿï¼ˆä»–ç­è«‹åŠ è¨»ç­ç´šï¼‰
4. **æäº¤è¨‚å–®**ï¼šç¢ºèªè³‡è¨Šå¾Œæäº¤

## â° é‡è¦æ™‚é–“æé†’
- **æ¯æ—¥çµå–®æ™‚é–“**ï¼šè«‹åƒè€ƒå„è¡¨å–®é¡¯ç¤ºæ™‚é–“
- **é€±ä¸‰æ³¨æ„**ï¼šéƒ¨åˆ†é¤å»³å›ºå®šå…¬ä¼‘
- **ä¿®æ”¹è¨‚å–®**ï¼šå¦‚éœ€ä¿®æ”¹è«‹ç›´æ¥è¯çµ¡ç­ä»£

## â“ å¸¸è¦‹å•é¡Œ
**Qï¼šå¯ä»¥è¨‚è³¼å¤šä»½å—ï¼Ÿ**
Aï¼šç›®å‰ç³»çµ±ä¸€æ¬¡åªæ¥å—ä¸€ä»½è¨‚å–®ã€‚

**Qï¼šå¿˜è¨˜è¨‚é¤æ€éº¼è¾¦ï¼Ÿ**
Aï¼šè«‹ç›´æ¥è¯çµ¡é¤å»³æˆ–è©¢å•ç­ä»£ã€‚

**Qï¼šå¦‚ä½•çŸ¥é“è¨‚å–®æ˜¯å¦æˆåŠŸï¼Ÿ**
Aï¼šæäº¤å¾Œæœƒé¡¯ç¤ºè¨‚å–®ç·¨è™Ÿå³ç‚ºæˆåŠŸã€‚

## ğŸ“ è¯çµ¡æ–¹å¼
- **ç­ä»£**ï¼šç‹å°æ˜ (0912-345-678)
- **ç³»çµ±å•é¡Œ**ï¼šæåŒå­¸ (admin@example.com)
- **ç·Šæ€¥è¯çµ¡**ï¼šç›´æ¥æ’¥æ‰“é¤å»³é›»è©±`;
                    
                    document.getElementById('guideEditor').value = defaultContent;
                    showMessage('âœ… å·²æ¢å¾©é è¨­æŒ‡å—å…§å®¹');
                }
            });
            
            // é‡æ–°æ•´ç†ç‹€æ…‹
            document.getElementById('refreshBtn').addEventListener('click', function() {
                loadFormSwitches();
                showMessage('ğŸ”„ ç‹€æ…‹å·²é‡æ–°æ•´ç†');
            });
            
            // é è¦½æŒ‡å—é é¢
            document.getElementById('viewGuideBtn').addEventListener('click', function() {
                window.open('guide.html', '_blank');
            });
            
            // æŸ¥çœ‹è¨‚é¤æ—¥æ›†
            document.getElementById('viewCalendarBtn').addEventListener('click', function() {
                window.open('calendar-simple.html', '_blank');
            });
            
            // æ‰‹æ©ŸæŒ‰éˆ•äº‹ä»¶
            document.getElementById('mobileOpenAll').addEventListener('click', function() {
                document.getElementById('openAllBtn').click();
            });
            
            document.getElementById('mobileCloseAll').addEventListener('click', function() {
                document.getElementById('closeAllBtn').click();
            });
            
            document.getElementById('mobileSave').addEventListener('click', function() {
                document.getElementById('saveGuideBtn').click();
            });
        }
        
        // ============================================
        // å·¥å…·å‡½æ•¸
        // ============================================
        
        // é¡¯ç¤ºè¨Šæ¯
        function showMessage(text) {
            const messageEl = document.getElementById('message');
            const icon = messageEl.querySelector('i');
            const textEl = messageEl.querySelector('span');
            
            // æ ¹æ“šè¨Šæ¯é¡å‹è¨­å®šåœ–æ¨™
            if (text.includes('âœ…') || text.includes('æˆåŠŸ') || text.includes('é–‹å•Ÿ')) {
                icon.className = 'fas fa-check-circle';
                messageEl.style.background = 'rgba(34, 197, 94, 0.9)';
            } else if (text.includes('âŒ') || text.includes('éŒ¯èª¤') || text.includes('é—œé–‰')) {
                icon.className = 'fas fa-times-circle';
                messageEl.style.background = 'rgba(239, 68, 68, 0.9)';
            } else {
                icon.className = 'fas fa-info-circle';
                messageEl.style.background = 'rgba(59, 130, 246, 0.9)';
            }
            
            textEl.textContent = text.replace(/âœ…|âŒ|ğŸ”„/g, '').trim();
            messageEl.classList.add('show');
            
            // 3ç§’å¾Œéš±è—
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 3000);
        }
        
        // æ›´æ–°æ™‚é–“é¡¯ç¤º
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-TW');
            document.getElementById('updateTime').textContent = timeStr;
        }
        
        // åµæ¸¬æ˜¯å¦ç‚ºæ‰‹æ©Ÿ
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // å¦‚æœæ˜¯æ‰‹æ©Ÿï¼Œé¡¯ç¤ºæç¤º
        if (isMobile()) {
            console.log('ğŸ“± åµæ¸¬åˆ°æ‰‹æ©Ÿè£ç½®ï¼Œå•Ÿå‹•æ‰‹æ©ŸæœƒåŒ–');
            document.body.style.paddingBottom = '100px';
        }
    </script>
    
    <!-- Font Awesome åœ–æ¨™ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</body>
</html>